<!DOCTYPE html>
<html>
  <head>
    <title>LDA Model Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="css/style.css" rel="stylesheet" media="screen">
  </head>
  <body>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span2">
          <h3>LDA Model Viewer&nbsp;<sup><span class="label label-info">alpha</span></sup></h3>
          <div id="sidebar">
            <div id="file_info" class="well" data-bind="visible: name">
              <div><strong>File name:</strong> <span data-bind="text: name"></span></div>
              <div><strong># words:</strong> <span data-bind="text: numWords"></span></div>
              <div><strong># topics:</strong> <span data-bind="text: numTopics"></span></div>
              <div data-bind="visible: processing">
                <span data-bind="text: processing"></span>:
                <div class="progress progress-striped active">
                  <div class="bar" data-bind="style: {width: progress() + '%'}"></div>
                </div>
              </div>
            </div>
            <div id="filter" class="well" data-bind="visible: topics().length > 0">
              <div data-bind="visible: processing">
                <span data-bind="text: processing"></span>:
                <div class="progress progress-striped active">
                  <div class="bar" data-bind="style: {width: progress() + '%'}"></div>
                </div>
              </div>
              <!-- ko if: words().length > 0 -->
              <!-- ko if: (topics().length > 0 && topics().length < 6) -->
              <h5>Topic</h5>
              <ul id="topic_selector" data-bind="foreach: topics">
                <li>
                <input type="radio" name="topic" data-bind="value: value, checked: $parent.selectedTopic" />
                <span data-bind="text: name"></span>
                </li>
              </ul>
              <!-- /ko -->
              <!-- ko if: topics().length > 5 -->
              <h5>Topic</h5>
              <select id="topic_selector" name="topic" data-bind="foreach: topics">
                <option data-bind="value: value, checked: $parent.selectedTopic,text: name" ></option>
              </select>
              <!-- /ko -->
              <h5>Number of Words</h5>
              <input type="range" min="0" max="1000" step="50" data-bind="value: topNWords" style="width: 100%"/>
              <span data-bind="text: topNWords"></span>
              <h5>Metric</h5>
              <label><input type="radio" name="metric" value="0" data-bind="checked: metric" /> Score</label>
              <label><input type="radio" name="metric" value="1" data-bind="checked: metric" /> Probability</label>
              <!-- ko if: selectedWords().length > 0 -->
              <h5>Selected Words</h5>
              <ul id="selected_words" data-bind="foreach: selectedWords">
                <li data-bind="style: {backgroundColor: $root.selectedWordColor($data)}">
                  <span data-bind="text: $data"></span>
                  <button type="button" class="close" data-bind="click: function() { $root.removeWord($data)}">&times;</button>
                </li>
              </ul>
              <button type="button" class="btn btn-small" data-bind="click: function() { $root.selectedWords.removeAll()}">Clear</button>
              <!-- /ko -->
              <!-- /ko -->
            </div>
          </div>
        </div>
        <div class="span8">
          <div id="msg" class="well" data-bind="visible: !name()" style="font-size: 2em">
            Drop a PLDA model file here
          </div>
          <h1 id="file_name" data-bind="text: name"></h1>
          <div id="top_n_words" data-bind="foreach: {data: words, as: 'list'}">
            <div class="word_list well">
              <h4 data-bind="text: 'Topic ' + ($index() +1)"></h4>
              <table data-bind="foreach: list">
                <tr>
                  <!-- ko if: dataModel.selectedWords.indexOf(word) > -1 -->
                  <td class="word selected" data-bind="text: word, click: $root.selectWord, style: {color: dataModel.selectedWordColor(word)}"></td>
                  <!-- /ko -->
                  <!-- ko if: dataModel.selectedWords.indexOf(word) == -1 -->
                  <td class="word" data-bind="text: word, click: $root.selectWord"></td>
                  <!-- /ko -->
                  <td data-bind="text: value.toFixed(value < 1 ? 4 : 1)"></td>
                </tr>
              </table>
            </div>
          </div>
          <div id="word_cloud" data-bind="visible: visible, style: {width: width + 'px'}">
            <h2>Word Cloud</h2>
          </div>
          <div id="word_stats" data-bind="visible: dataModel.selectedWords().length">
            <h2>Word stats</h2>
          </div>
          <div id="topic_descriptive" data-bind="visible: dataModel.topicData().length">
            <h2>Topic descriptiveness</h2>
            <p>Number of unique words in the top <span data-bind="text: numberOfWords"></span> words of each topic.
            </p>
            <div>
              <input type="range" min="5" max="100" step="5" data-bind="value: numberOfWords" style="width: 200px"/>
              <span><span data-bind="text: numberOfWords"></span> words</span>
            </div>

          </div>
        </div>
        <div class="span2" id="sidebar_right">
        </div>
      </div>
    </div>

    <script src="js/jquery-1.9.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/knockout-2.2.1.js"></script>
    <script src="js/d3.min.js"></script>
    <script src="js/d3.layout.cloud.js"></script>
    <script src="js/batch.js"></script>
    <script src="js/FileModel.js"></script>
    <script src="js/DataModel.js"></script>
    <script src="js/WordCloudModel.js"></script>
    <script src="js/TopNWordsModel.js"></script>
    <script src="js/WordStatsModel.js"></script>
    <script src="js/DescriptiveModel.js"></script>
  </body>
</html>
